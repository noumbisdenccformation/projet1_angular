<mat-toolbar color="primary" class="navbar">
  <div class="navbar-brand">
    <mat-icon class="brand-icon">local_hospital</mat-icon>
    <span class="brand-text">Clinique Médicale</span>
  </div>

  <div class="navbar-menu" *ngIf="currentUser">
    <!-- Dashboard -->
    <button mat-button routerLink="/dashboard" routerLinkActive="active">
      <mat-icon>dashboard</mat-icon>
      Tableau de bord
    </button>

    <!-- Patients -->
    <button mat-button routerLink="/patients" routerLinkActive="active" 
            *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.DOCTOR, UserRole.SECRETARY])">
      <mat-icon>people</mat-icon>
      Patients
    </button>

    <!-- Rendez-vous -->
    <button mat-button routerLink="/appointments" routerLinkActive="active"
            *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.DOCTOR, UserRole.SECRETARY])">
      <mat-icon>event</mat-icon>
      Rendez-vous
    </button>

    <!-- Calendrier -->
    <button mat-button routerLink="/calendar" routerLinkActive="active"
            *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.DOCTOR, UserRole.SECRETARY])">
      <mat-icon>calendar_today</mat-icon>
      Calendrier
    </button>

    <!-- Prescriptions -->
    <button mat-button routerLink="/prescriptions" routerLinkActive="active"
            *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.DOCTOR])">
      <mat-icon>medication</mat-icon>
      Prescriptions
    </button>

    <!-- Factures -->
    <button mat-button routerLink="/invoices" routerLinkActive="active"
            *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.SECRETARY])">
      <mat-icon>receipt</mat-icon>
      Factures
    </button>

    <!-- Chat -->
    <button mat-button routerLink="/chat" routerLinkActive="active">
      <mat-icon matBadge="3" matBadgeColor="warn">chat</mat-icon>
      Messages
    </button>

    <!-- Administration -->
    <button mat-button [matMenuTriggerFor]="adminMenu" 
            *ngIf="authService.isAdmin()">
      <mat-icon>admin_panel_settings</mat-icon>
      Administration
    </button>

    <mat-menu #adminMenu="matMenu">
      <button mat-menu-item routerLink="/admin/users">
        <mat-icon>manage_accounts</mat-icon>
        Gestion des utilisateurs
      </button>
      <button mat-menu-item routerLink="/admin/statistics">
        <mat-icon>analytics</mat-icon>
        Statistiques
      </button>
    </mat-menu>
  </div>

  <div class="navbar-user">
    <button mat-button [matMenuTriggerFor]="userMenu" *ngIf="currentUser">
      <mat-icon>account_circle</mat-icon>
      {{ getDisplayName() }}
      <mat-icon>arrow_drop_down</mat-icon>
    </button>

    <mat-menu #userMenu="matMenu">
      <div class="user-info" mat-menu-item disabled>
        <mat-icon>person</mat-icon>
        <span>{{ getDisplayName() }}</span>
        <small>{{ getRoleDisplayName(currentUser!.role) }}</small>
      </div>
      <mat-divider></mat-divider>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        Déconnexion
      </button>
    </mat-menu>
  </div>
</mat-toolbar> 