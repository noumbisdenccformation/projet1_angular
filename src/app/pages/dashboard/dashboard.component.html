<div class="dashboard-container">
  <!-- En-tête du dashboard -->
  <div class="dashboard-header">
    <div class="welcome-section">
      <h1>{{ getWelcomeMessage() }}</h1>
      <p class="role-info">{{ getRoleDisplayName() }}</p>
      <p class="date-info">{{ currentDate | date:'EEEE d MMMM yyyy' }}</p>
    </div>
  </div>

  <!-- Statistiques principales -->
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon patients">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ totalPatients }}</h3>
            <p>Patients</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon appointments">
            <mat-icon>event</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ todayAppointments }}</h3>
            <p>RDV Aujourd'hui</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon invoices">
            <mat-icon>receipt</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ pendingInvoices }}</h3>
            <p>Factures en attente</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon revenue">
            <mat-icon>euro</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ monthlyRevenue | currency:'EUR':'symbol':'1.0-0' }}</h3>
            <p>Revenus du mois</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Actions rapides -->
  <div class="quick-actions">
    <h2>Actions rapides</h2>
    <div class="actions-grid">
      <button mat-raised-button color="primary" routerLink="/patients/new" 
              *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.SECRETARY])">
        <mat-icon>person_add</mat-icon>
        Nouveau patient
      </button>
      
      <button mat-raised-button color="accent" routerLink="/appointments/new"
              *ngIf="authService.hasAnyRole([UserRole.ADMIN, UserRole.SECRETARY])">
        <mat-icon>event_available</mat-icon>
        Nouveau RDV
      </button>
      
      <button mat-raised-button color="warn" routerLink="/prescriptions/new"
              *ngIf="authService.hasAnyRole([UserRole.DOCTOR])">
        <mat-icon>medication</mat-icon>
        Nouvelle prescription
      </button>
      
      <button mat-raised-button routerLink="/calendar">
        <mat-icon>calendar_today</mat-icon>
        Voir le calendrier
      </button>
    </div>
  </div>

  <!-- Contenu spécifique au rôle -->
  <div class="role-specific-content">
    <!-- Pour les médecins -->
    <div *ngIf="authService.isDoctor()" class="doctor-content">
      <div class="content-section">
        <h2>Mes patients récents</h2>
        <div class="patients-list">
          <mat-card *ngFor="let patient of recentPatients" class="patient-card">
            <mat-card-content>
              <div class="patient-info">
                <h4>{{ patient.firstName }} {{ patient.lastName }}</h4>
                <p>Dossier: {{ patient.fileNumber }}</p>
                <p>Téléphone: {{ patient.phone }}</p>
              </div>
              <button mat-button color="primary" [routerLink]="['/patients', patient.id]">
                Voir détails
              </button>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <!-- Pour les secrétaires -->
    <div *ngIf="authService.isSecretary()" class="secretary-content">
      <div class="content-section">
        <h2>Rendez-vous à venir</h2>
        <div class="appointments-list">
          <mat-card *ngFor="let appointment of upcomingAppointments" class="appointment-card">
            <mat-card-content>
              <div class="appointment-info">
                <h4>{{ appointment.patientName }}</h4>
                <p>{{ appointment.time }} - {{ appointment.type }}</p>
                <p>{{ appointment.doctor }}</p>
              </div>
              <button mat-button color="primary" [routerLink]="['/appointments', appointment.id]">
                Voir détails
              </button>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>

    <!-- Pour les administrateurs -->
    <div *ngIf="authService.isAdmin()" class="admin-content">
      <div class="content-section">
        <h2>Gestion du système</h2>
        <div class="admin-actions">
          <button mat-raised-button color="primary" routerLink="/admin/users">
            <mat-icon>manage_accounts</mat-icon>
            Gestion des utilisateurs
          </button>
          <button mat-raised-button color="accent" routerLink="/admin/statistics">
            <mat-icon>analytics</mat-icon>
            Statistiques détaillées
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
